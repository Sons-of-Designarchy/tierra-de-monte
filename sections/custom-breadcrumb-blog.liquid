{% comment %}
  SECTION: custom-breadcrumb-blog (Dawn 15.4.0)
{% endcomment %}

{%- assign has_context = false -%}
{%- if article and blog -%}
  {%- assign has_context = true -%}
{%- endif -%}

<link rel="stylesheet" href="{{ 'component-button.css' | asset_url }}" media="all">

{%- style -%}
  .section-{{ section.id }}-padding{padding-top:{{ section.settings.padding_top | times: 0.75 | round: 0 }}px;padding-bottom:{{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px}
  @media (min-width:750px){.section-{{ section.id }}-padding{padding-top:{{ section.settings.padding_top }}px;padding-bottom:{{ section.settings.padding_bottom }}px}}

  #shopify-section-{{ section.id }} .cbb__bar{border-top:1px solid currentColor;border-bottom:1px solid currentColor}
  #shopify-section-{{ section.id }} .cbb__inner{display:flex;align-items:center;gap:16px;min-height:48px;padding:10px 0}

  #shopify-section-{{ section.id }} .cbb__back{display:inline-flex;align-items:center;gap:8px;font:inherit;text-decoration:none;line-height:1;white-space:nowrap}
  #shopify-section-{{ section.id }} .cbb__back svg{width:18px;height:18px;flex:0 0 18px}

  #shopify-section-{{ section.id }} .cbb__crumbs{
    font-family:var(--font-monospace-family, var(--font-body-family));
    letter-spacing:.02em;text-transform:uppercase;opacity:.8;flex:1 1 auto;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap
  }
  @media (max-width:480px){
    #shopify-section-{{ section.id }} .cbb__inner{gap:12px}
    #shopify-section-{{ section.id }} .cbb__crumbs{overflow:auto;-webkit-overflow-scrolling:touch}
  }
{%- endstyle -%}

<section class="section-{{ section.id }}-padding color-{{ section.settings.color_scheme }} gradient">
  <div class="cbb__bar">
    <div class="page-width">
      <div class="cbb__inner" role="navigation" aria-label="Breadcrumb">
        {%- if has_context -%}
          <a class="cbb__back" href="{{ blog.url }}" aria-label="Back to {{ blog.title | escape }}">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
              <path fill="currentColor" d="M14.7 5.3a1 1 0 0 1 0 1.4L10.41 11H20a1 1 0 1 1 0 2h-9.59l4.3 4.3a1 1 0 1 1-1.42 1.4l-6-6a1 1 0 0 1 0-1.4l6-6a1 1 0 0 1 1.41 0Z"/>
            </svg>
            <span>{{ section.settings.back_label | default: 'Back' }}</span>
          </a>

          <div class="cbb__crumbs" aria-current="page">
            <a href="{{ blog.url }}" class="link" style="text-decoration:none;">
              {{ blog.title | handleize | upcase }}
            </a>
            /
            {{ article.title | handleize | upcase }}
          </div>
        {%- else -%}
          <a class="cbb__back" href="/blogs" aria-label="Back to blogs">
            <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
              <path fill="currentColor" d="M14.7 5.3a1 1 0 0 1 0 1.4L10.41 11H20a1 1 0 1 1 0 2h-9.59l4.3 4.3a1 1 0 1 1-1.42 1.4l-6-6a1 1 0 0 1 0-1.4l6-6a1 1 0 0 1 1.41 0Z"/>
            </svg>
            <span>{{ section.settings.back_label | default: 'Back' }}</span>
          </a>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom breadcrumb — blog",
  "class": "section section--custom-breadcrumb-blog",
  "settings": [
    { "type": "text", "id": "back_label", "label": "Back button label", "default": "Back" },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1",
      "options": [
        { "value": "scheme-1", "label": "Scheme 1" },
        { "value": "scheme-2", "label": "Scheme 2" },
        { "value": "scheme-3", "label": "Scheme 3" },
        { "value": "scheme-4", "label": "Scheme 4" },
        { "value": "scheme-5", "label": "Scheme 5" }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 64,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 64,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 12
    }
  ],
  "presets": [{ "name": "Custom breadcrumb — blog" }]
}
{% endschema %}
